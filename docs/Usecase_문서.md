# Usecase 문서

## 📋 문서 개요

### 문서 정보
- **문서명**: Usecase 문서
- **작성일**: 2025년 11월 19일
- **버전**: 1.0
- **작성 목적**: 메시징 플랫폼의 주요 기능에 대한 Usecase 정의

---

## 1. 발신번호 등록 및 승인

### 1.1 Usecase ID
UC-001

### 1.2 Usecase Name
발신번호 등록 및 승인

### 1.3 Actors
- **주 액터**: 회원 (개인/기업)
- **보조 액터**: 관리자 (심사 관리자)

### 1.4 Usecase 설명
회원이 문자 발송을 위한 발신번호를 등록하고, 관리자가 서류를 검토하여 승인 또는 반려 처리하는 프로세스

### 1.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함
- 발신번호가 중복 등록되지 않아야 함

### 1.6 사후 조건
- 발신번호가 승인 완료되면 발송 서비스 사용 가능
- 발신번호가 반려되면 재신청 가능
- 승인/반려 결과가 회원에게 알림 발송됨

### 1.7 기본 흐름
1. 회원이 발신번호 관리 페이지에 접근
2. 시스템이 발신번호 목록을 조회하여 표시
3. 회원이 "발신번호 등록" 버튼 클릭
4. 시스템이 발신번호 등록 팝업을 표시
5. 회원이 회원 유형 선택 (개인/기업)
6. 회원이 발신번호 입력
7. 시스템이 발신번호 유형 자동 인식 (휴대폰/유선)
8. 발신번호가 휴대폰 번호인 경우, 회원이 본인인증 수행
9. 회원이 명의 구분 선택 (본인/타인/타사)
10. 회원이 필수 서류 첨부
11. 회원이 연락처 정보 입력
12. 회원이 "승인요청" 버튼 클릭
13. 시스템이 입력값 검증 수행
14. 시스템이 발신번호 등록 신청을 저장하고 "승인대기" 상태로 설정
15. 시스템이 관리자에게 승인 대기 알림 발송
16. 관리자가 승인 대기 목록에서 발신번호 선택
17. 관리자가 서류 검토 수행
18. 관리자가 서류 확인 완료 후 "승인" 버튼 클릭
19. 시스템이 발신번호 상태를 "승인완료"로 변경
20. 시스템이 회원에게 승인 완료 알림 발송 (SMS/이메일)
21. 회원이 발신번호로 문자 발송 가능

### 1.8 대체 흐름
**1.8.1 유선번호 등록 시**
- 7단계에서 유선번호로 인식되면, 8단계(본인인증)를 건너뛰고 9단계로 진행

**1.8.2 타인/타사 명의 등록 시**
- 9단계에서 타인/타사 명의 선택 시, 위임장 및 추가 서류 첨부 필요

**1.8.3 서류 보완 요청**
- 17단계에서 서류 미비 시, 관리자가 "보완 요청" 처리
- 시스템이 회원에게 보완 요청 알림 발송
- 회원이 추가 서류 제출 후 재신청

**1.8.4 반려 처리**
- 17단계에서 서류 불일치 또는 부적절한 경우, 관리자가 "반려" 처리
- 관리자가 반려 사유 입력
- 시스템이 발신번호 상태를 "반려"로 변경
- 시스템이 회원에게 반려 알림 발송 (반려 사유 포함)
- 회원이 반려 사유 확인 후 재신청 가능

### 1.9 예외 흐름
**1.9.1 발신번호 중복**
- 13단계에서 이미 등록된 발신번호인 경우, 시스템이 "이미 등록된 발신번호입니다" 오류 메시지 표시
- 6단계로 돌아가서 다른 발신번호 입력

**1.9.2 본인인증 실패**
- 8단계에서 본인인증 실패 시, 시스템이 "본인인증에 실패했습니다" 오류 메시지 표시
- 회원이 재인증 시도

**1.9.3 필수 서류 미첨부**
- 13단계에서 필수 서류 미첨부 시, 시스템이 "필수 서류를 첨부해주세요" 오류 메시지 표시
- 10단계로 돌아가서 서류 첨부

**1.9.4 파일 업로드 실패**
- 10단계에서 파일 업로드 실패 시, 시스템이 "파일 업로드에 실패했습니다" 오류 메시지 표시
- 회원이 재업로드 시도

**1.9.5 네트워크 오류**
- 14단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 회원이 재시도

---

## 2. 알림톡 템플릿 등록 및 검수

### 2.1 Usecase ID
UC-002

### 2.2 Usecase Name
알림톡 템플릿 등록 및 검수

### 2.3 Actors
- **주 액터**: 회원
- **보조 액터**: 관리자 (심사 관리자), 카카오 비즈니스 API

### 2.4 Usecase 설명
회원이 알림톡 템플릿을 등록하고, 관리자가 검수한 후 카카오 검수를 요청하여 승인받는 프로세스

### 2.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함
- 카카오톡 채널(https://center-pf.kakao.com)에서 비즈니스 채널로 등록된 카카오톡 채널(발신프로필)이 Tokbell에 등록되어 있어야 함

### 2.6 사후 조건
- 템플릿이 카카오 승인 완료되면 알림톡 발송에 사용 가능
- 템플릿이 반려되면 재신청 가능
- 검수 결과가 회원에게 알림 발송됨

### 2.7 기본 흐름
1. 회원이 알림톡 템플릿 관리 페이지에 접근
2. 시스템이 발신프로필 목록을 조회하여 표시
3. 회원이 발신프로필 선택
4. 시스템이 선택한 발신프로필의 템플릿 목록을 조회하여 표시
5. 회원이 "템플릿 등록" 버튼 클릭
6. 시스템이 템플릿 등록 페이지를 표시
7. 회원이 템플릿명 입력
8. 회원이 메시지 내용 입력
9. 회원이 변수 설정 (#{변수명} 형식)
10. 회원이 버튼 설정 (선택사항)
11. 회원이 이미지 업로드 (선택사항)
12. 회원이 "검수 요청" 버튼 클릭
13. 시스템이 입력값 검증 수행
14. 시스템이 템플릿을 저장하고 "검수대기" 상태로 설정
15. 시스템이 관리자에게 검수 대기 알림 발송
16. 관리자가 검수 대기 목록에서 템플릿 선택
17. 관리자가 발신프로필 정보 확인
18. 관리자가 템플릿 내용 검토
19. 관리자가 "카카오 검수 요청" 버튼 클릭
20. 시스템이 카카오 비즈니스 API에 검수 요청 전송
21. 카카오가 템플릿 검수 수행
22. 시스템이 카카오 검수 결과를 수신
23. 카카오 검수 결과가 "승인"인 경우, 관리자가 "승인" 버튼 클릭
24. 시스템이 템플릿 상태를 "승인완료"로 변경
25. 시스템이 회원에게 승인 완료 알림 발송
26. 회원이 템플릿으로 알림톡 발송 가능

### 2.8 대체 흐름
**2.8.1 관리자 직접 반려**
- 15단계에서 템플릿 내용이 부적절한 경우, 관리자가 "반려" 처리
- 관리자가 반려 사유 입력
- 시스템이 템플릿 상태를 "반려"로 변경
- 시스템이 회원에게 반려 알림 발송

**2.8.2 카카오 검수 반려**
- 19단계에서 카카오 검수 결과가 "반려"인 경우, 시스템이 반려 사유 저장
- 관리자가 반려 사유 확인 후 회원에게 알림 발송
- 회원이 반려 사유 확인 후 템플릿 수정하여 재신청

**2.8.3 템플릿 수정**
- 22단계 이후 회원이 템플릿 수정 시, 템플릿 상태를 "검수대기"로 변경
- 재검수 프로세스 진행

### 2.9 예외 흐름
**2.9.1 템플릿명 중복**
- 11단계에서 동일한 템플릿명이 이미 존재하는 경우, 시스템이 "이미 등록된 템플릿명입니다" 오류 메시지 표시
- 5단계로 돌아가서 다른 템플릿명 입력

**2.9.2 변수 형식 오류**
- 11단계에서 변수 형식이 잘못된 경우, 시스템이 "변수 형식이 올바르지 않습니다" 오류 메시지 표시
- 7단계로 돌아가서 변수 수정

**2.9.3 이미지 크기 초과**
- 9단계에서 이미지 크기가 제한을 초과하는 경우, 시스템이 "이미지 크기가 너무 큽니다" 오류 메시지 표시
- 회원이 이미지 크기 조정 후 재업로드

**2.9.4 카카오 API 오류**
- 17단계에서 카카오 API 호출 실패 시, 시스템이 "카카오 검수 요청에 실패했습니다" 오류 메시지 표시
- 관리자가 재시도

**2.9.5 네트워크 오류**
- 12단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 회원이 재시도

---

## 3. 일반문자 발송

### 3.1 Usecase ID
UC-003

### 3.2 Usecase Name
일반문자 발송

### 3.3 Actors
- **주 액터**: 회원
- **보조 액터**: 통신사 API

### 3.4 Usecase 설명
회원이 일반 문자메시지(SMS/LMS/MMS)를 발송하는 프로세스

### 3.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함
- 승인 완료된 발신번호가 등록되어 있어야 함
- 충분한 잔액이 있어야 함

### 3.6 사후 조건
- 메시지가 발송 큐에 등록됨
- 발송 비용이 잔액에서 차감됨
- 발송 내역이 기록됨
- 발송 결과가 조회 가능함

### 3.7 기본 흐름
1. 회원이 일반문자 발송 페이지에 접근
2. 시스템이 발신번호 목록을 조회하여 표시
3. 회원이 발신번호 선택
4. 회원이 수신번호 입력 (직접입력/주소록/엑셀 업로드)
5. 시스템이 수신번호 검증 수행 (형식, 중복, 수신거부 제외)
6. 회원이 메시지 타입 선택 (SMS/LMS/MMS)
7. 회원이 메시지 내용 입력
8. 시스템이 메시지 타입 자동 전환 (90바이트 초과 시 LMS)
9. 회원이 이미지 첨부 (MMS인 경우)
10. 회원이 발송 시간 설정 (즉시/예약)
11. 회원이 "발송하기" 버튼 클릭
12. 시스템이 발송 전 검증 수행 (발신번호, 수신번호, 내용, 잔액)
13. 시스템이 예상 발송 비용 계산
14. 시스템이 발송 확인 팝업 표시
15. 회원이 발송 정보 확인 후 "확인" 버튼 클릭
16. 시스템이 발송 큐에 등록
17. 시스템이 발송 비용을 잔액에서 차감
18. 시스템이 발송 내역 저장
19. 시스템이 통신사 API에 발송 요청 전송
20. 통신사가 메시지 발송 처리
21. 시스템이 발송 결과 수신 및 저장
22. 시스템이 발송 완료 메시지 표시
23. 회원이 발송 결과 페이지에서 발송 내역 확인 가능

### 3.8 대체 흐름
**3.8.1 템플릿 사용**
- 7단계에서 회원이 "템플릿 선택" 버튼 클릭
- 시스템이 템플릿 목록 팝업 표시
- 회원이 템플릿 선택
- 시스템이 템플릿 내용을 메시지 입력창에 자동 입력
- 7단계로 돌아가서 내용 수정 가능

**3.8.2 변수 치환**
- 7단계에서 템플릿에 변수가 포함된 경우, 회원이 변수 값 입력
- 시스템이 변수 치환 수행
- 미리보기에서 치환 결과 확인

**3.8.3 예약 발송**
- 10단계에서 회원이 "예약발송" 선택
- 회원이 날짜 및 시간 선택
- 16단계에서 시스템이 예약 발송 테이블에 저장
- 예약 시간 도래 시 자동 발송 처리

**3.8.4 테스트 발송**
- 11단계 이전에 회원이 "테스트 발송" 버튼 클릭
- 회원이 테스트 번호 입력
- 시스템이 테스트 발송 수행
- 테스트 발송도 포인트 차감

**3.8.5 대량 발송**
- 4단계에서 엑셀 업로드로 대량 수신번호 입력
- 시스템이 대량 데이터 검증 수행
- 발송 시 배치 처리로 분할 발송

### 3.9 예외 흐름
**3.9.1 발신번호 미등록**
- 2단계에서 승인 완료된 발신번호가 없는 경우, 시스템이 "발신번호를 먼저 등록해주세요" 안내 메시지 표시
- 발신번호 등록 페이지로 이동

**3.9.2 수신번호 형식 오류**
- 5단계에서 잘못된 형식의 수신번호가 있는 경우, 시스템이 오류 번호 목록 표시
- 회원이 오류 번호 수정 또는 제외

**3.9.3 잔액 부족**
- 12단계에서 잔액이 부족한 경우, 시스템이 "잔액이 부족합니다" 경고 메시지 표시
- 충전 페이지로 이동 안내
- 발송 버튼 비활성화

**3.9.4 발송 실패**
- 20단계에서 통신사 API 오류 발생 시, 시스템이 발송 실패 처리
- 실패 내역 저장
- 회원에게 실패 알림 발송
- 재발송 가능

**3.9.5 부분 실패**
- 21단계에서 일부 번호만 발송 실패한 경우, 시스템이 성공/실패 건수 구분 표시
- 실패 번호 목록 제공
- 실패 건만 재발송 가능

---

## 4. 알림톡 발송

### 4.1 Usecase ID
UC-004

### 4.2 Usecase Name
알림톡 발송

### 4.3 Actors
- **주 액터**: 회원
- **보조 액터**: 카카오 비즈니스 API, 통신사 API (대체 발송)

### 4.4 Usecase 설명
회원이 승인된 알림톡 템플릿을 사용하여 알림톡을 발송하는 프로세스. 실패 시 자동으로 SMS/LMS로 대체 발송

### 4.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함
- 카카오톡 채널(https://center-pf.kakao.com)에서 비즈니스 채널로 등록된 카카오톡 채널(발신프로필)이 Tokbell에 등록되어 있어야 함
- 선택한 발신프로필에 승인 완료된 알림톡 템플릿이 있어야 함
- 충분한 잔액이 있어야 함

### 4.6 사후 조건
- 알림톡이 발송 큐에 등록됨
- 발송 비용이 잔액에서 차감됨
- 발송 내역이 기록됨
- 실패 시 대체 발송 처리됨

### 4.7 기본 흐름
1. 회원이 알림톡 발송 페이지에 접근
2. 시스템이 발신프로필 목록을 조회하여 표시
3. 회원이 발신프로필 선택
4. 시스템이 선택한 발신프로필의 템플릿 존재 여부 확인 (최우선)
5. 템플릿이 없는 경우, 시스템이 템플릿 등록 안내 화면 표시
6. 템플릿이 있는 경우, 시스템이 승인 완료된 알림톡 템플릿 목록을 조회하여 표시
7. 회원이 템플릿 선택
8. 시스템이 템플릿 정보 표시 (내용, 변수, 버튼)
9. 회원이 수신번호 입력 (직접입력/주소록/엑셀 업로드)
10. 시스템이 수신번호 검증 수행
11. 회원이 변수 값 입력 (#{변수명}에 대한 값)
12. 시스템이 변수 치환 수행
13. 회원이 발송 시간 설정 (즉시/예약)
14. 회원이 "발송하기" 버튼 클릭
15. 시스템이 발송 전 검증 수행 (발신프로필, 템플릿, 수신번호, 변수, 잔액)
16. 시스템이 예상 발송 비용 계산
17. 시스템이 발송 확인 팝업 표시
18. 회원이 발송 정보 확인 후 "확인" 버튼 클릭
19. 시스템이 발송 큐에 등록
20. 시스템이 발송 비용을 잔액에서 차감
21. 시스템이 발송 내역 저장
22. 시스템이 카카오 비즈니스 API에 발송 요청 전송
23. 카카오가 알림톡 발송 처리
24. 시스템이 발송 결과 수신
25. 발송 성공 시, 시스템이 성공 내역 저장
26. 발송 실패 시, 시스템이 자동으로 SMS/LMS 대체 발송 수행
27. 시스템이 발송 완료 메시지 표시
28. 회원이 발송 결과 페이지에서 발송 내역 확인 가능

### 4.8 대체 흐름
**4.8.1 대체 발송 (친구 추가 안됨)**
- 23단계에서 수신자가 카카오톡 친구가 아닌 경우, 카카오가 발송 실패 처리
- 26단계에서 시스템이 자동으로 SMS/LMS 대체 발송 수행
- 대체 발송 비용 추가 차감

**4.8.2 대체 발송 (알림톡 수신 거부)**
- 23단계에서 수신자가 알림톡 수신을 거부한 경우, 카카오가 발송 실패 처리
- 26단계에서 시스템이 자동으로 SMS/LMS 대체 발송 수행

**4.8.3 예약 발송**
- 13단계에서 회원이 "예약발송" 선택
- 회원이 날짜 및 시간 선택
- 19단계에서 시스템이 예약 발송 테이블에 저장
- 예약 시간 도래 시 자동 발송 처리

**4.8.4 발신프로필 미등록**
- 2단계에서 발신프로필이 없는 경우, 시스템이 "발신프로필을 먼저 등록해주세요" 안내 메시지 표시
- 발신프로필 관리 페이지로 이동 안내

**4.8.5 템플릿 미선택**
- 7단계에서 회원이 템플릿을 선택하지 않은 경우, 시스템이 "템플릿을 선택해주세요" 경고 메시지 표시
- 템플릿 선택 후 진행

### 4.9 예외 흐름
**4.9.1 발신프로필 미등록**
- 2단계에서 발신프로필이 없는 경우, 시스템이 "카카오톡 채널(https://center-pf.kakao.com)에서 비즈니스 채널로 등록된 카카오톡 채널(발신프로필)을 먼저 등록해주세요" 안내 메시지 표시
- 발신프로필 관리 페이지로 이동

**4.9.2 템플릿 미등록**
- 4단계에서 선택한 발신프로필에 승인 완료된 템플릿이 없는 경우, 시스템이 "알림톡 템플릿을 먼저 등록해주세요" 안내 메시지 표시
- 템플릿 등록 페이지로 이동

**4.9.3 변수 값 미입력**
- 15단계에서 필수 변수 값이 입력되지 않은 경우, 시스템이 "필수 변수를 입력해주세요" 오류 메시지 표시
- 11단계로 돌아가서 변수 값 입력

**4.9.4 잔액 부족**
- 15단계에서 잔액이 부족한 경우, 시스템이 "잔액이 부족합니다" 경고 메시지 표시
- 충전 페이지로 이동 안내

**4.9.5 카카오 API 오류**
- 22단계에서 카카오 API 호출 실패 시, 시스템이 발송 실패 처리
- 자동으로 SMS/LMS 대체 발송 수행

**4.9.6 네트워크 오류**
- 19단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 회원이 재시도

---

## 3. 발신프로필 등록 및 관리

### 3.1 Usecase ID
UC-003-1

### 3.2 Usecase Name
발신프로필 등록 및 관리

### 3.3 Actors
- **주 액터**: 회원
- **보조 액터**: 카카오톡 채널 (https://center-pf.kakao.com)

### 3.4 Usecase 설명
회원이 카카오톡 채널(발신프로필)을 등록하고 관리하는 프로세스. 카카오톡 채널(https://center-pf.kakao.com)에서 비즈니스 채널로 등록된 카카오톡 채널(발신프로필)만 Tokbell에 등록 가능

### 3.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함
- 카카오톡 채널(https://center-pf.kakao.com)에서 비즈니스 채널로 등록된 카카오톡 채널이 있어야 함

### 3.6 사후 조건
- 발신프로필이 등록되면 알림톡/브랜드톡 발송에 사용 가능
- 발신프로필 상태가 카카오톡 채널과 동기화됨

### 3.7 기본 흐름
1. 회원이 발신프로필 관리 페이지에 접근
2. 시스템이 발신프로필 목록을 조회하여 표시
3. 회원이 "신규 등록" 버튼 클릭
4. 시스템이 발신프로필 등록 팝업을 표시
5. 회원이 발신프로필 ID 입력 (@아이디 형태)
6. 시스템이 발신프로필 ID 형식 검증 수행
7. 회원이 담당자 휴대폰 번호 입력 (- 없이 숫자만)
8. 회원이 "인증요청" 버튼 클릭
9. 시스템이 발신프로필과 담당자 휴대폰 번호 일치 여부 확인
10. 일치하는 경우, 시스템이 "인증되었습니다" 알림 표시
11. 회원이 카테고리 선택 (최대 3개)
12. 회원이 "등록" 버튼 클릭
13. 시스템이 입력값 검증 수행 (발신프로필 ID, 카테고리)
14. 시스템이 중복 체크 수행
15. 시스템이 카카오 API로 채널 정보 확인
16. 시스템이 발신프로필을 저장하고 "등록" 상태로 설정
17. 시스템이 등록 완료 메시지 표시
18. 회원이 발신프로필 목록에서 등록된 프로필 확인 가능

### 3.8 대체 흐름
**3.8.1 발신프로필 상세보기**
- 2단계에서 회원이 "상세" 버튼 클릭
- 시스템이 발신프로필 상세 정보 표시
- 회원이 기본정보, 담당자 정보, 카테고리, 등록이력, 관련 템플릿 확인

**3.8.2 발신프로필 수정**
- 3.8.1 단계에서 상태가 활성인 경우, 회원이 "수정" 버튼 클릭
- 회원이 담당자 휴대폰 번호, 카테고리 수정
- 시스템이 수정 내용 저장

**3.8.3 발신프로필 삭제**
- 3.8.1 단계에서 템플릿이 없는 경우, 회원이 "삭제" 버튼 클릭
- 시스템이 삭제 확인 팝업 표시
- 회원이 확인 후 삭제 처리

**3.8.4 인증 실패**
- 9단계에서 발신프로필과 담당자 휴대폰 번호가 일치하지 않는 경우, 시스템이 "발신프로필과 휴대폰 번호가 일치하지 않습니다" 오류 메시지 표시
- 7단계로 돌아가서 휴대폰 번호 재입력

### 3.9 예외 흐름
**3.9.1 발신프로필 ID 형식 오류**
- 6단계에서 발신프로필 ID 형식이 잘못된 경우, 시스템이 "발신프로필 ID는 @로 시작하고 영문/숫자/언더스코어만 허용됩니다" 오류 메시지 표시
- 5단계로 돌아가서 발신프로필 ID 재입력

**3.9.2 중복 등록**
- 14단계에서 이미 등록된 발신프로필인 경우, 시스템이 "이미 등록된 발신프로필입니다" 오류 메시지 표시
- 5단계로 돌아가서 다른 발신프로필 ID 입력

**3.9.3 카테고리 선택 오류**
- 13단계에서 카테고리를 선택하지 않았거나 3개를 초과한 경우, 시스템이 "카테고리를 최소 1개 이상, 최대 3개까지 선택해주세요" 오류 메시지 표시
- 11단계로 돌아가서 카테고리 재선택

**3.9.4 카카오 API 오류**
- 15단계에서 카카오 API 호출 실패 시, 시스템이 "카카오 채널 정보를 확인할 수 없습니다" 오류 메시지 표시
- 회원이 재시도

**3.9.5 네트워크 오류**
- 16단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 회원이 재시도

---

## 4. 알림톡 발송

### 5.1 Usecase ID
UC-005

### 5.2 Usecase Name
발신번호 승인 처리 (어드민)

### 5.3 Actors
- **주 액터**: 관리자 (심사 관리자)
- **보조 액터**: 회원

### 5.4 Usecase 설명
관리자가 사용자가 등록 신청한 발신번호의 서류를 검토하여 승인 또는 반려 처리하는 프로세스

### 5.5 사전 조건
- 관리자가 로그인되어 있어야 함
- 관리자 권한이 "심사 관리자" 이상이어야 함
- 승인 대기 상태의 발신번호가 있어야 함

### 5.6 사후 조건
- 발신번호가 승인되면 회원이 발송 서비스 사용 가능
- 발신번호가 반려되면 회원이 재신청 가능
- 승인/반려 결과가 회원에게 알림 발송됨
- 검토 이력이 기록됨

### 5.7 기본 흐름
1. 관리자가 발신번호 승인 관리 페이지에 접근
2. 시스템이 승인 대기 목록을 조회하여 표시
3. 관리자가 승인 대기 발신번호 선택
4. 시스템이 발신번호 상세 정보 및 서류 표시
5. 관리자가 서류 파일 다운로드
6. 관리자가 서류 내용 확인
7. 관리자가 발신번호 정보와 서류 정보 일치 여부 확인
8. 관리자가 서류 검증 완료
9. 관리자가 "승인" 버튼 클릭
10. 시스템이 승인 확인 팝업 표시
11. 관리자가 "확인" 버튼 클릭
12. 시스템이 발신번호 상태를 "승인완료"로 변경
13. 시스템이 검토 이력 저장
14. 시스템이 회원에게 승인 완료 알림 발송 (SMS/이메일)
15. 회원이 발신번호로 문자 발송 가능

### 5.8 대체 흐름
**5.8.1 반려 처리**
- 8단계에서 서류 미비 또는 정보 불일치 시, 관리자가 "반려" 버튼 클릭
- 관리자가 반려 사유 선택/입력
- 시스템이 반려 확인 팝업 표시
- 관리자가 "확인" 버튼 클릭
- 시스템이 발신번호 상태를 "반려"로 변경
- 시스템이 검토 이력 저장
- 시스템이 회원에게 반려 알림 발송 (반려 사유 포함)

**5.8.2 보완 요청**
- 8단계에서 서류가 일부 부족한 경우, 관리자가 "보완 요청" 버튼 클릭
- 관리자가 보완 요청 사유 입력
- 시스템이 보완 요청 처리
- 시스템이 회원에게 보완 요청 알림 발송
- 회원이 추가 서류 제출 후 재신청

**5.8.3 일괄 승인**
- 2단계에서 관리자가 여러 발신번호를 선택
- 관리자가 "일괄 승인" 버튼 클릭
- 시스템이 선택한 모든 발신번호에 대해 승인 처리

**5.8.4 검토 메모 작성**
- 8단계에서 관리자가 검토 메모 작성
- 시스템이 검토 메모 저장
- 검토 이력에 메모 포함

### 5.9 예외 흐름
**5.9.1 서류 파일 다운로드 실패**
- 5단계에서 서류 파일 다운로드 실패 시, 시스템이 "파일 다운로드에 실패했습니다" 오류 메시지 표시
- 관리자가 재시도

**5.9.2 서류 정보 불일치**
- 7단계에서 발신번호 정보와 서류 정보가 일치하지 않는 경우, 관리자가 반려 처리
- 반려 사유에 "정보 불일치" 명시

**5.9.3 서류 유효 기간 초과**
- 6단계에서 서류 유효 기간이 초과된 경우, 관리자가 반려 처리
- 반려 사유에 "서류 유효 기간 초과" 명시

**5.9.4 네트워크 오류**
- 12단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 관리자가 재시도

**5.9.5 알림 발송 실패**
- 14단계에서 알림 발송 실패 시, 시스템이 오류 로그 기록
- 관리자에게 알림 발송 실패 알림

---

## 6. 알림톡 템플릿 검수 처리 (어드민)

### 6.1 Usecase ID
UC-006

### 6.2 Usecase Name
알림톡 템플릿 검수 처리 (어드민)

### 6.3 Actors
- **주 액터**: 관리자 (심사 관리자)
- **보조 액터**: 회원, 카카오 비즈니스 API

### 6.4 Usecase 설명
관리자가 사용자가 등록 신청한 알림톡 템플릿을 검토하고, 카카오 검수를 요청하여 승인 처리하는 프로세스. 발신프로필 정보 확인 포함

### 6.5 사전 조건
- 관리자가 로그인되어 있어야 함
- 관리자 권한이 "심사 관리자" 이상이어야 함
- 검수 대기 상태의 템플릿이 있어야 함
- 카카오 비즈니스 API 연동이 정상 상태여야 함

### 6.6 사후 조건
- 템플릿이 카카오 승인 완료되면 회원이 알림톡 발송에 사용 가능
- 템플릿이 반려되면 회원이 재신청 가능
- 검수 결과가 회원에게 알림 발송됨
- 검수 이력이 기록됨

### 6.7 기본 흐름
1. 관리자가 알림톡 템플릿 검수 관리 페이지에 접근
2. 시스템이 검수 대기 목록을 조회하여 표시
3. 관리자가 검수 대기 템플릿 선택
4. 시스템이 템플릿 상세 정보 표시 (발신프로필 정보, 내용, 변수, 버튼, 이미지)
5. 관리자가 발신프로필 정보 확인 (발신프로필 ID, 채널명, 상태)
6. 관리자가 템플릿 내용 검토
7. 관리자가 변수 설정 확인
8. 관리자가 버튼 설정 확인
9. 관리자가 템플릿 검증 완료
10. 관리자가 "카카오 검수 요청" 버튼 클릭
11. 시스템이 카카오 검수 요청 확인 팝업 표시
12. 관리자가 "확인" 버튼 클릭
13. 시스템이 카카오 비즈니스 API에 검수 요청 전송
14. 시스템이 템플릿 상태를 "검수중"으로 변경
15. 카카오가 템플릿 검수 수행
16. 시스템이 카카오 검수 결과를 주기적으로 조회
17. 카카오 검수 결과가 "승인"인 경우, 시스템이 결과 저장
18. 관리자가 "승인" 버튼 클릭
19. 시스템이 템플릿 상태를 "승인완료"로 변경
20. 시스템이 검수 이력 저장
21. 시스템이 회원에게 승인 완료 알림 발송
22. 회원이 템플릿으로 알림톡 발송 가능

### 6.8 대체 흐름
**6.8.1 관리자 직접 반려**
- 9단계에서 템플릿 내용이 부적절한 경우, 관리자가 "반려" 버튼 클릭
- 관리자가 반려 사유 입력
- 시스템이 템플릿 상태를 "반려"로 변경
- 시스템이 검수 이력 저장
- 시스템이 회원에게 반려 알림 발송

**6.8.2 카카오 검수 반려**
- 17단계에서 카카오 검수 결과가 "반려"인 경우, 시스템이 반려 사유 저장
- 시스템이 템플릿 상태를 "반려"로 변경
- 관리자가 반려 사유 확인
- 시스템이 회원에게 반려 알림 발송 (반려 사유 포함)

**6.8.3 카카오 검수 대기**
- 15단계에서 카카오 검수 결과가 아직 없는 경우, 시스템이 계속 대기
- 관리자가 검수 상태 확인 가능

**6.8.4 검수 메모 작성**
- 9단계에서 관리자가 검수 메모 작성
- 시스템이 검수 메모 저장
- 검수 이력에 메모 포함

### 6.9 예외 흐름
**6.9.1 카카오 API 오류**
- 12단계에서 카카오 API 호출 실패 시, 시스템이 "카카오 검수 요청에 실패했습니다" 오류 메시지 표시
- 관리자가 재시도

**6.9.2 템플릿 내용 오류**
- 6단계에서 템플릿 내용에 오류가 있는 경우, 관리자가 반려 처리
- 반려 사유에 "템플릿 내용 오류" 명시

**6.9.3 변수 설정 오류**
- 7단계에서 변수 설정이 잘못된 경우, 관리자가 반려 처리
- 반려 사유에 "변수 설정 오류" 명시

**6.9.4 네트워크 오류**
- 12단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 관리자가 재시도

**6.9.5 카카오 검수 결과 조회 실패**
- 15단계에서 카카오 검수 결과 조회 실패 시, 시스템이 오류 로그 기록
- 관리자에게 알림 발송

---

## 7. 충전 및 입금 확인

### 7.1 Usecase ID
UC-007

### 7.2 Usecase Name
충전 및 입금 확인

### 7.3 Actors
- **주 액터**: 회원, 관리자 (운영 관리자)
- **보조 액터**: PG사, 은행

### 7.4 Usecase 설명
회원이 포인트를 충전하고, 무통장입금의 경우 관리자가 입금을 확인하여 충전을 완료하는 프로세스

### 7.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함

### 7.6 사후 조건
- 충전이 완료되면 잔액이 증가함
- 충전 내역이 기록됨
- 입금 확인이 완료되면 충전이 완료됨

### 7.7 기본 흐름
1. 회원이 충전하기 페이지에 접근
2. 시스템이 충전 금액 선택 옵션 표시
3. 회원이 충전 금액 선택 또는 직접 입력
4. 회원이 결제 수단 선택 (신용카드/무통장입금/가상계좌 등)
5. 회원이 "충전하기" 버튼 클릭
6. 결제 수단이 신용카드인 경우:
   a. 시스템이 PG사 결제 페이지로 이동
   b. 회원이 결제 정보 입력
   c. PG사가 결제 처리
   d. 시스템이 결제 결과 수신
   e. 결제 성공 시 9단계로 진행
7. 결제 수단이 무통장입금인 경우:
   a. 시스템이 입금 계좌 정보 표시
   b. 회원이 입금자명 입력
   c. 시스템이 충전 상태를 "입금대기"로 설정
   d. 회원이 입금 완료 후 "입금확인 요청" 버튼 클릭
   e. 시스템이 관리자에게 입금 확인 요청 알림 발송
   f. 관리자가 입금 확인 요청 목록에서 확인
   g. 관리자가 은행 거래 내역 확인
   h. 관리자가 입금 확인 처리
   i. 9단계로 진행
8. 결제 수단이 가상계좌인 경우:
   a. 시스템이 가상계좌 정보 표시
   b. 회원이 입금 완료 대기
   c. PG사가 입금 확인 후 시스템에 알림
   d. 9단계로 진행
9. 시스템이 충전 금액을 잔액에 추가
10. 시스템이 충전 내역 저장
11. 시스템이 충전 완료 알림 발송
12. 회원이 충전 내역 페이지에서 확인 가능

### 7.8 대체 흐름
**7.8.1 쿠폰 적용**
- 3단계에서 회원이 쿠폰 선택
- 시스템이 할인 금액 계산
- 최종 충전 금액에 할인 적용

**7.8.2 입금 확인 실패**
- 7.g단계에서 입금이 확인되지 않은 경우, 관리자가 "미입금" 처리
- 시스템이 회원에게 미입금 알림 발송
- 회원이 재입금 또는 취소

**7.8.3 결제 취소**
- 6.c단계에서 회원이 결제 취소한 경우, 시스템이 충전 취소 처리
- 충전 내역에 취소 상태 기록

### 7.9 예외 흐름
**7.9.1 결제 실패**
- 6.d단계에서 결제 실패 시, 시스템이 "결제에 실패했습니다" 오류 메시지 표시
- 회원이 재시도 또는 다른 결제 수단 선택

**7.9.2 PG사 연동 오류**
- 6.a단계에서 PG사 연동 오류 발생 시, 시스템이 "결제 시스템 오류가 발생했습니다" 오류 메시지 표시
- 고객센터 연락 안내

**7.9.3 입금 확인 지연**
- 7.g단계에서 입금 확인이 지연되는 경우, 시스템이 대기 상태 유지
- 회원이 고객센터 문의 가능

**7.9.4 네트워크 오류**
- 9단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 재시도 또는 고객센터 문의 안내

---

## 8. 수신거부 등록

### 8.1 Usecase ID
UC-008

### 8.2 Usecase Name
수신거부 등록

### 8.3 Actors
- **주 액터**: 회원
- **보조 액터**: 080 수신거부 서비스

### 8.4 Usecase 설명
회원이 수신거부 번호를 등록하여 모든 발송에서 자동으로 제외되도록 하는 프로세스

### 8.5 사전 조건
- 회원이 로그인되어 있어야 함
- 회원 계정이 정상 상태여야 함

### 8.6 사후 조건
- 수신거부 번호가 등록됨
- 등록된 번호는 모든 발송에서 자동 제외됨
- 080 수신거부 서비스와 동기화됨

### 8.7 기본 흐름
1. 회원이 수신거부 관리 페이지에 접근
2. 시스템이 수신거부 목록을 조회하여 표시
3. 회원이 수신거부 유형 선택 (통합/광고/선거)
4. 회원이 수신거부 등록 방식 선택 (개별 입력/엑셀 업로드)
5. 개별 입력인 경우:
   a. 회원이 전화번호 입력
   b. 시스템이 전화번호 형식 검증
   c. 시스템이 중복 확인
   d. 회원이 "등록" 버튼 클릭
   e. 6단계로 진행
6. 엑셀 업로드인 경우:
   a. 회원이 엑셀 파일 업로드
   b. 시스템이 파일 파싱 및 검증
   c. 시스템이 중복 번호 제거
   d. 시스템이 검증 결과 표시
   e. 회원이 "등록하기" 버튼 클릭
   f. 7단계로 진행
7. 시스템이 수신거부 번호 등록
8. 시스템이 발송 시스템에 즉시 반영
9. 시스템이 080 수신거부 서비스와 동기화 (선택사항)
10. 시스템이 등록 완료 메시지 표시
11. 회원이 수신거부 목록에서 확인 가능

### 8.8 대체 흐름
**8.8.1 080 서비스 자동 동기화**
- 9단계에서 시스템이 주기적으로 080 서비스와 동기화
- 080 서비스에 등록된 번호를 자동으로 가져옴

**8.8.2 수신거부 삭제**
- 11단계 이후 회원이 수신거부 번호 삭제
- 시스템이 발송 시스템에서 제외 해제
- 삭제된 번호는 다시 발송 대상에 포함

### 8.9 예외 흐름
**8.9.1 전화번호 형식 오류**
- 5.b단계에서 전화번호 형식이 잘못된 경우, 시스템이 "올바른 전화번호 형식을 입력해주세요" 오류 메시지 표시
- 5.a단계로 돌아가서 수정

**8.9.2 중복 등록**
- 5.c단계에서 이미 등록된 번호인 경우, 시스템이 "이미 등록된 번호입니다" 안내 메시지 표시
- 등록 건너뛰기

**8.9.3 엑셀 파일 형식 오류**
- 6.b단계에서 파일 형식이 잘못된 경우, 시스템이 "올바른 엑셀 파일 형식이 아닙니다" 오류 메시지 표시
- 6.a단계로 돌아가서 파일 재업로드

**8.9.4 대량 등록 시 오류**
- 6.b단계에서 일부 번호에 오류가 있는 경우, 시스템이 오류 번호 목록 표시
- 유효한 번호만 등록 처리

**8.9.5 동기화 실패**
- 9단계에서 080 서비스 동기화 실패 시, 시스템이 오류 로그 기록
- 관리자에게 알림 발송
- 수동 동기화 가능

---

## 9. 회원 계정 정지 (어드민)

### 9.1 Usecase ID
UC-009

### 9.2 Usecase Name
회원 계정 정지 (어드민)

### 9.3 Actors
- **주 액터**: 관리자 (운영 관리자 이상)
- **보조 액터**: 회원

### 9.4 Usecase 설명
관리자가 부적절한 활동을 한 회원의 계정을 정지하여 발송 기능을 제한하는 프로세스

### 9.5 사전 조건
- 관리자가 로그인되어 있어야 함
- 관리자 권한이 "운영 관리자" 이상이어야 함
- 정지 대상 회원이 있어야 함

### 9.6 사후 조건
- 회원 계정이 정지 상태로 변경됨
- 회원의 발송 기능이 제한됨
- 정지 사유가 기록됨
- 회원에게 정지 알림 발송됨

### 9.7 기본 흐름
1. 관리자가 회원 관리 페이지에 접근
2. 시스템이 회원 목록을 조회하여 표시
3. 관리자가 정지 대상 회원 선택
4. 시스템이 회원 상세 정보 표시
5. 관리자가 "계정 정지" 버튼 클릭
6. 시스템이 계정 정지 팝업 표시
7. 관리자가 정지 사유 선택/입력
8. 관리자가 정지 기간 설정 (무기한/기간 지정)
9. 관리자가 "정지" 버튼 클릭
10. 시스템이 정지 확인 팝업 표시
11. 관리자가 "확인" 버튼 클릭
12. 시스템이 회원 계정 상태를 "정지"로 변경
13. 시스템이 정지 이력 저장
14. 시스템이 회원에게 정지 알림 발송 (이메일/SMS)
15. 회원의 발송 기능이 제한됨

### 9.8 대체 흐름
**9.8.1 정지 해제**
- 15단계 이후 관리자가 "정지 해제" 버튼 클릭
- 시스템이 정지 해제 확인 팝업 표시
- 관리자가 "확인" 버튼 클릭
- 시스템이 회원 계정 상태를 "정상"으로 변경
- 시스템이 정지 해제 이력 저장
- 시스템이 회원에게 정지 해제 알림 발송
- 회원의 발송 기능이 복구됨

**9.8.2 기간 만료 자동 해제**
- 8단계에서 기간 지정한 경우, 정지 기간 만료 시 자동으로 정지 해제
- 시스템이 회원 계정 상태를 "정상"으로 변경
- 시스템이 회원에게 정지 해제 알림 발송

### 9.9 예외 흐름
**9.9.1 정지 사유 미입력**
- 7단계에서 정지 사유를 입력하지 않은 경우, 시스템이 "정지 사유를 입력해주세요" 오류 메시지 표시
- 7단계로 돌아가서 사유 입력

**9.9.2 이미 정지된 계정**
- 5단계에서 이미 정지된 계정인 경우, 시스템이 "이미 정지된 계정입니다" 안내 메시지 표시
- 정지 해제 옵션 제공

**9.9.3 네트워크 오류**
- 12단계에서 네트워크 오류 발생 시, 시스템이 "네트워크 오류가 발생했습니다" 오류 메시지 표시
- 관리자가 재시도

**9.9.4 알림 발송 실패**
- 14단계에서 알림 발송 실패 시, 시스템이 오류 로그 기록
- 관리자에게 알림 발송 실패 알림

---

## 10. 발송 통계 조회 (어드민)

### 10.1 Usecase ID
UC-010

### 10.2 Usecase Name
발송 통계 조회 (어드민)

### 10.3 Actors
- **주 액터**: 관리자 (운영 관리자 이상)

### 10.4 Usecase 설명
관리자가 시스템 전체의 발송 통계를 조회하고 분석하는 프로세스

### 10.5 사전 조건
- 관리자가 로그인되어 있어야 함
- 관리자 권한이 "운영 관리자" 이상이어야 함

### 10.6 사후 조건
- 통계 데이터가 조회됨
- 리포트가 생성됨 (선택사항)

### 10.7 기본 흐름
1. 관리자가 통계 및 리포트 페이지에 접근
2. 시스템이 메인 대시보드 표시
3. 관리자가 통계 조회 기간 선택
4. 관리자가 통계 항목 선택 (발송 건수/성공률/타입별 등)
5. 관리자가 필터 조건 설정 (회원 유형/메시지 타입 등)
6. 관리자가 "조회" 버튼 클릭
7. 시스템이 통계 데이터 조회 및 집계
8. 시스템이 통계 차트 및 그래프 표시
9. 관리자가 통계 데이터 확인
10. 관리자가 리포트 생성 선택 (선택사항)
11. 관리자가 리포트 형식 선택 (PDF/Excel)
12. 관리자가 "다운로드" 버튼 클릭
13. 시스템이 리포트 생성 및 다운로드 제공

### 10.8 대체 흐름
**10.8.1 실시간 통계**
- 2단계에서 관리자가 "실시간 통계" 선택
- 시스템이 실시간으로 통계 데이터 업데이트
- 자동 새로고침 (1분마다)

**10.8.2 커스텀 리포트**
- 10단계에서 관리자가 "커스텀 리포트" 선택
- 관리자가 리포트 항목 선택
- 관리자가 기간 및 필터 조건 설정
- 리포트 생성

### 10.9 예외 흐름
**10.9.1 데이터 없음**
- 7단계에서 조회 기간에 데이터가 없는 경우, 시스템이 "조회된 데이터가 없습니다" 안내 메시지 표시
- 기간 수정 후 재조회

**10.9.2 대량 데이터 처리 지연**
- 7단계에서 대량 데이터 조회 시 처리 지연 발생
- 시스템이 로딩 인디케이터 표시
- 처리 완료 후 결과 표시

**10.9.3 리포트 생성 실패**
- 13단계에서 리포트 생성 실패 시, 시스템이 "리포트 생성에 실패했습니다" 오류 메시지 표시
- 관리자가 재시도

---

**문서 작성일**: 2025년 11월 19일  
**문서 버전**: 1.0  
**다음 검토일**: [날짜]


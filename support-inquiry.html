<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1:1 문의 - 톡벨</title>
    <script src="js/header.js"></script>
    <link rel="stylesheet" href="css/common.css">
    <style>
        .page-header {
            margin-bottom: 32px;
        }

        .page-header h2 {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        /* 탭 메뉴 */
        .support-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .support-tab {
            padding: 14px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .support-tab:hover {
            color: var(--text-primary);
        }

        .support-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        /* 문의 탭 */
        .inquiry-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 24px;
            background-color: #f1f5f9;
            border-radius: var(--radius-md);
            padding: 4px;
        }

        .inquiry-tab {
            flex: 1;
            padding: 12px 24px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            transition: all 0.2s;
            border-radius: var(--radius-md);
        }

        .inquiry-tab.active {
            background-color: var(--surface-color);
            color: var(--primary-color);
        }

        /* 폼 스타일 */
        .inquiry-form {
            background-color: var(--surface-color);
            border-radius: var(--radius-xl);
            padding: 32px;
            border: 1px solid var(--border-color);
        }

        .form-row {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
        }

        .form-group {
            flex: 1;
            margin-bottom: 20px;
        }

        .form-group.full-width {
            width: 100%;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        .form-label.required::after {
            content: ' *';
            color: var(--danger-color);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            font-size: 14px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background-color: var(--surface-color);
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-textarea {
            resize: vertical;
            min-height: 200px;
        }

        .email-input-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .email-input-group input#emailId {
            flex: 1;
            min-width: 0;
        }

        .email-input-group input#emailDomain {
            flex: 1;
            min-width: 0;
        }

        .email-input-group select {
            flex: 1;
            min-width: 0;
        }

        .email-input-group span {
            color: var(--text-secondary);
            flex-shrink: 0;
        }

        .file-input-group {
            display: flex;
            gap: 8px;
        }

        .file-input-group input {
            flex: 1;
        }

        .file-info {
            margin-top: 8px;
            font-size: 12px;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .privacy-agreement {
            margin-top: 24px;
            padding: 20px;
            background-color: var(--bg-color);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }

        .privacy-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            margin-bottom: 16px;
        }

        .privacy-checkbox input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin-top: 2px;
            cursor: pointer;
        }

        .privacy-checkbox label {
            font-size: 14px;
            color: var(--text-primary);
            cursor: pointer;
        }

        .privacy-details {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.8;
            padding-left: 26px;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 32px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-reset {
            background-color: #f59e0b;
            color: white;
        }

        .btn-reset:hover {
            background-color: #d97706;
        }

        .btn-submit {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-submit:hover {
            background-color: var(--primary-hover);
        }

        /* 문의내역 테이블 */
        .inquiry-table-container {
            background-color: var(--surface-color);
            border-radius: var(--radius-xl);
            border: 1px solid var(--border-color);
            overflow: hidden;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .table th {
            background-color: #f8fafc;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 13px;
        }

        .table tbody tr:last-child td {
            border-bottom: none;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <script>
            document.write(createHeader('support'));
        </script>

        <main class="main-content">
            <div class="page-header">
                <h2>고객센터</h2>
                <p class="page-description">궁금하신 점이나 문의사항을 남겨주시면 빠르게 답변드리겠습니다.</p>
            </div>

            <!-- 탭 메뉴 -->
            <div class="support-tabs" id="supportTabs">
                <a href="support-notice.html" class="support-tab">공지사항</a>
                <a href="support-event.html" class="support-tab">이벤트</a>
                <a href="support-faq.html" class="support-tab">FAQ</a>
                <a href="support-inquiry.html" class="support-tab active">1:1 문의</a>
            </div>

            <!-- 문의 탭 -->
            <div class="inquiry-tabs" id="inquiryTabs">
                <button class="inquiry-tab active" onclick="switchInquiryTab('form')">1:1 문의하기</button>
                <button class="inquiry-tab" onclick="switchInquiryTab('history')">1:1 문의내역</button>
            </div>

            <!-- 1:1 문의하기 -->
            <div id="inquiryForm" class="inquiry-tab-content">
                <div class="inquiry-form" id="inquiryFormWrapper">
                    <form id="inquiryFormElement" onsubmit="handleSubmit(event)">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="userId">아이디</label>
                                <input 
                                    type="text" 
                                    id="userId" 
                                    class="form-input" 
                                    value="jhcho5784"
                                    readonly
                                >
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="email">이메일</label>
                                <div class="email-input-group">
                                    <input 
                                        type="text" 
                                        id="emailId" 
                                        class="form-input" 
                                        value="jhcho5784"
                                    >
                                    <span>@</span>
                                    <input 
                                        type="text" 
                                        id="emailDomain" 
                                        class="form-input" 
                                        value="naver.com"
                                    >
                                    <select class="form-select" id="emailDomainSelect" onchange="handleEmailDomainChange()">
                                        <option value="naver.com" selected>네이버</option>
                                        <option value="gmail.com">Gmail</option>
                                        <option value="daum.net">다음</option>
                                        <option value="custom">직접입력</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label required" for="inquiryType">문의유형</label>
                                <select class="form-select" id="inquiryType" required>
                                    <option value="">문의유형 선택</option>
                                    <option value="price">가격 문의</option>
                                    <option value="service">서비스 문의</option>
                                    <option value="technical">기술 문의</option>
                                    <option value="other">기타</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label required" for="subject">제목</label>
                                <input 
                                    type="text" 
                                    id="subject" 
                                    class="form-input" 
                                    placeholder="제목을 입력해주세요"
                                    required
                                >
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label required" for="content">문의내용</label>
                                <textarea 
                                    id="content" 
                                    class="form-textarea" 
                                    placeholder="문의 내용을 입력해주세요"
                                    required
                                ></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group full-width">
                                <label class="form-label" for="attachment">첨부파일</label>
                                <div class="file-input-group">
                                    <input 
                                        type="text" 
                                        id="filePath" 
                                        class="form-input" 
                                        placeholder="파일을 선택해주세요"
                                        readonly
                                    >
                                    <button type="button" class="btn btn-outline" onclick="document.getElementById('fileInput').click()">찾아보기</button>
                                    <input 
                                        type="file" 
                                        id="fileInput" 
                                        style="display: none;"
                                        onchange="handleFileSelect(event)"
                                        accept=".jpg,.jpeg,.gif,.png,.bmp,.docx,.xlsx,.xls,.csv,.pdf"
                                    >
                                </div>
                                <div class="file-info">
                                    • 5MB 이하의 파일만 업로드 가능합니다.<br>
                                    • 첨부 가능한 파일 형식 : jpg, jpeg, gif, png, bmp, docx, xlsx, xls, csv, pdf
                                </div>
                            </div>
                        </div>

                        <div class="privacy-agreement">
                            <div class="privacy-checkbox">
                                <input type="checkbox" id="privacyAgree" required>
                                <label for="privacyAgree">개인정보 수집 및 이용에 동의합니다. (필수)</label>
                            </div>
                            <div class="privacy-details">
                                - 수집 및 이용 항목 : 아이디, 이메일, 첨부파일<br>
                                - 수집 및 이용 목적: 문의 접수 및 답변 회신<br>
                                - 수집 및 이용 기간 : 개인정보처리방침 준수, 관계법령 및 기타응대를 위해 문의 내용을 보관할 수 있습니다.
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn btn-reset" onclick="handleReset()">다시쓰기</button>
                            <button type="submit" class="btn btn-submit">문의하기</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- 1:1 문의내역 -->
            <div id="inquiryHistory" class="inquiry-tab-content" style="display: none;">
                <div class="inquiry-table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th style="width: 80px;">번호</th>
                                <th style="width: 150px;">문의유형</th>
                                <th>제목</th>
                                <th style="width: 100px;">답변여부</th>
                                <th style="width: 120px;">등록일</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="5">
                                    <div class="empty-state">문의하신 내역이 없습니다.</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script>
        function switchInquiryTab(tab) {
            const formTab = document.querySelector('.inquiry-tabs button:first-child');
            const historyTab = document.querySelector('.inquiry-tabs button:last-child');
            const formContent = document.getElementById('inquiryForm');
            const historyContent = document.getElementById('inquiryHistory');

            if (tab === 'form') {
                formTab.classList.add('active');
                historyTab.classList.remove('active');
                formContent.style.display = 'block';
                historyContent.style.display = 'none';
            } else {
                formTab.classList.remove('active');
                historyTab.classList.add('active');
                formContent.style.display = 'none';
                historyContent.style.display = 'block';
            }
        }

        function handleEmailDomainChange() {
            const select = document.getElementById('emailDomainSelect');
            const domainInput = document.getElementById('emailDomain');
            
            if (select.value === 'custom') {
                domainInput.value = '';
                domainInput.readOnly = false;
                domainInput.focus();
            } else {
                domainInput.value = select.value;
                domainInput.readOnly = true;
            }
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const filePath = document.getElementById('filePath');
                filePath.value = file.name;
                
                // 파일 크기 체크 (5MB)
                if (file.size > 5 * 1024 * 1024) {
                    alert('5MB 이하의 파일만 업로드 가능합니다.');
                    event.target.value = '';
                    filePath.value = '';
                    return;
                }
            }
        }

        function handleReset() {
            document.getElementById('inquiryFormElement').reset();
            document.getElementById('userId').value = 'jhcho5784';
            document.getElementById('emailId').value = 'jhcho5784';
            document.getElementById('emailDomain').value = 'naver.com';
            document.getElementById('emailDomainSelect').value = 'naver.com';
            document.getElementById('filePath').value = '';
            document.getElementById('fileInput').value = '';
        }

        function handleSubmit(event) {
            event.preventDefault();
            
            if (!document.getElementById('privacyAgree').checked) {
                alert('개인정보 수집 및 이용에 동의해주세요.');
                return;
            }

            // 폼 제출 로직
            alert('문의가 접수되었습니다. 빠른 시일 내에 답변드리겠습니다.');
            handleReset();
        }

        // 드롭다운 메뉴 초기화
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initDropdownMenus === 'function') {
                initDropdownMenus();
            }
        });
    </script>

    <script src="js/footer.js"></script>
    <script>
        document.write(createFooter());
    </script>
    <!-- 화면설계 오버레이 -->
    <script src="js/spec-overlay.js"></script>
    <script>
        const specData = [
            // 1. 탭 메뉴
            { selector: '#supportTabs', title: '탭 메뉴', position: { top: '-5px', left: '-10px' }, function: '고객센터 페이지 이동' },
            // 2. 공지사항 탭
            { selector: '#supportTabs .support-tab:nth-child(1)', title: '공지사항 탭', position: { top: '-5px', left: '-10px' }, function: '공지사항 페이지' },
            // 3. 이벤트 탭
            { selector: '#supportTabs .support-tab:nth-child(2)', title: '이벤트 탭', position: { top: '-5px', left: '-10px' }, function: '이벤트 페이지' },
            // 4. FAQ 탭
            { selector: '#supportTabs .support-tab:nth-child(3)', title: 'FAQ 탭', position: { top: '-5px', left: '-10px' }, function: 'FAQ 페이지' },
            // 5. 1:1 문의 탭
            { selector: '#supportTabs .support-tab:nth-child(4)', title: '1:1 문의 탭', position: { top: '-5px', right: '-10px' }, function: '1:1 문의 페이지 (현재)' },
            // 6. 문의 탭 메뉴
            { selector: '#inquiryTabs', title: '문의 상태 탭', position: { top: '-5px', left: '-10px' }, function: '문의하기/문의내역 전환' },
            // 7. 문의하기 탭
            { selector: '#inquiryTabs .tab-item:first-child', title: '문의하기 탭', position: { top: '-5px', left: '-10px' }, function: '새 문의 작성' },
            // 8. 문의내역 탭
            { selector: '#inquiryTabs .tab-item:nth-child(2)', title: '문의내역 탭', position: { top: '-5px', right: '-10px' }, function: '이전 문의 조회' },
            // 9. 문의 폼
            { selector: '#inquiryFormWrapper', title: '1:1 문의 폼', position: { top: '10px', left: '10px' }, function: '문의 작성 양식' },
            // 10. 아이디 필드
            { selector: '#inquiryUserId', title: '아이디', position: { top: '-5px', right: '-10px' }, function: '로그인 아이디 (읽기전용)' },
            // 11. 이메일 필드
            { selector: '#inquiryEmail', title: '이메일', position: { top: '-5px', right: '-10px' }, function: '답변 받을 이메일', tags: [{ text: '필수', type: 'required' }] },
            // 12. 문의유형 선택
            { selector: '#inquiryType', title: '문의유형', position: { top: '-5px', left: '-10px' }, function: '문의 카테고리 선택', tags: [{ text: '필수', type: 'required' }] },
            // 13. 제목 입력
            { selector: '#inquiryTitle', title: '제목', position: { top: '-5px', right: '-10px' }, function: '문의 제목 입력', tags: [{ text: '필수', type: 'required' }] },
            // 14. 내용 입력
            { selector: '#inquiryContent', title: '내용', position: { top: '5px', right: '5px' }, function: '문의 내용 작성', tags: [{ text: '필수', type: 'required' }] },
            // 15. 파일 첨부
            { selector: '#inquiryFile', title: '파일 첨부', position: { top: '-5px', left: '-10px' }, function: '첨부 파일 업로드 (5MB 이하)' },
            // 16. 개인정보 동의
            { selector: '#privacyAgree', title: '개인정보 동의', position: { top: '-5px', left: '-10px' }, function: '개인정보 수집 동의', tags: [{ text: '필수', type: 'required' }] },
            // 17. 등록 버튼
            { selector: '#submitInquiryBtn', title: '등록 버튼', position: { top: '-5px', right: '-10px' }, function: '문의 등록', api: 'POST /api/inquiries' },
            // 18. 문의 내역 테이블
            { selector: '#inquiryHistory', title: '문의 내역', position: { top: '10px', left: '10px' }, function: '이전 문의 목록', api: 'GET /api/inquiries' }
        ];
        initSpecOverlay(specData);
    </script>
</body>
</html>


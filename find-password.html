<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>비밀번호 찾기 - Tokbell Admin</title>
    <script src="js/header.js"></script>
    <style>
/* 공통 스타일 */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-color: #2563eb;
    --primary-hover: #1d4ed8;
    --secondary-color: #64748b;
    --success-color: #10b981;
    --danger-color: #ef4444;
    --warning-color: #f59e0b;
    --bg-color: #f8fafc;
    --surface-color: #ffffff;
    --border-color: #e2e8f0;
    --text-primary: #1e293b;
    --text-secondary: #64748b;
    --text-muted: #94a3b8;
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    font-size: 14px;
    line-height: 1.6;
    color: var(--text-primary);
    background-color: var(--bg-color);
}

/* 레이아웃 스타일 */
.app-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}

/* 헤더 */
.header {
    background-color: var(--surface-color);
    border-bottom: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-content {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 64px;
}

.logo h1 {
    font-size: 28px;
    font-weight: 700;
    color: var(--primary-color);
    margin: 0;
}

.logo a {
    text-decoration: none;
    color: inherit;
    display: block;
}

.logo a:hover h1 {
    opacity: 0.8;
}

.main-nav {
    display: flex;
    gap: 4px;
    flex: 1;
    justify-content: center;
    position: relative;
}

.nav-item {
    padding: 8px 16px;
    text-decoration: none;
    color: var(--text-secondary);
    font-weight: 500;
    border-radius: var(--radius-md);
    transition: all 0.2s;
    position: relative;
    display: flex;
    align-items: center;
    gap: 4px;
}

.nav-item:hover {
    background-color: var(--bg-color);
    color: var(--text-primary);
}

.nav-item.active {
    background-color: rgba(37, 99, 235, 0.1);
    color: var(--primary-color);
}

.nav-item.has-dropdown {
    position: relative;
}

.nav-item.has-dropdown .nav-link::after {
    content: '▼';
    font-size: 10px;
    margin-left: 4px;
    transition: transform 0.2s;
    display: inline-block;
}

.nav-item.has-dropdown.open .nav-link::after {
    transform: rotate(180deg);
}

.nav-item.has-dropdown .nav-link {
    text-decoration: none;
    color: inherit;
    display: flex;
    align-items: center;
}

/* 드롭다운 메뉴 */
.nav-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    margin-top: 8px;
    background-color: var(--surface-color);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    min-width: 180px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s;
    z-index: 1000;
    padding: 8px 0;
}

.nav-item.open .nav-dropdown {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.nav-dropdown-item {
    display: block;
    padding: 10px 20px;
    text-decoration: none;
    color: var(--text-primary);
    font-size: 14px;
    transition: all 0.2s;
}

.nav-dropdown-item:hover {
    background-color: var(--bg-color);
    color: var(--primary-color);
}

.nav-dropdown-item.active {
    background-color: rgba(37, 99, 235, 0.1);
    color: var(--primary-color);
    font-weight: 600;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 16px;
}

.balance-info {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 8px 16px;
    background-color: var(--bg-color);
    border-radius: var(--radius-md);
}

.balance-label {
    font-size: 12px;
    color: var(--text-secondary);
}

.balance-amount {
    font-weight: 600;
    color: var(--primary-color);
}

/* 잔액 툴팁 스타일 */
.balance-tooltip-wrapper {
    position: relative;
    display: inline-flex;
    cursor: pointer;
}

.balance-tooltip-content {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: 8px;
    background: #1e293b;
    color: white;
    padding: 16px;
    border-radius: 8px;
    font-size: 13px;
    line-height: 1.6;
    white-space: normal;
    width: 200px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s;
    z-index: 1000;
}

.balance-tooltip-wrapper:hover .balance-tooltip-content {
    opacity: 1;
    visibility: visible;
}

.balance-tooltip-content::after {
    content: '';
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-bottom-color: #1e293b;
}

/* 버튼 스타일 */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 10px 20px;
    font-size: 14px;
    font-weight: 500;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    gap: 8px;
}

.btn-primary {
    background-color: var(--primary-color);
    color: white;
}

.btn-primary:hover:not(:disabled) {
    background-color: var(--primary-hover);
}

.btn-outline {
    background-color: transparent;
    border: 1px solid var(--border-color);
    color: var(--text-primary);
}

.btn-outline:hover:not(:disabled) {
    background-color: var(--bg-color);
}

.btn-sm {
    padding: 6px 12px;
    font-size: 12px;
}

.btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

/* 메인 컨텐츠 */
.main-content {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 24px;
    min-height: calc(100vh - 64px);
}

.find-container {
    background-color: var(--surface-color);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    width: 100%;
    max-width: 480px;
    padding: 48px 40px;
}

.find-header {
    text-align: center;
    margin-bottom: 32px;
}

.find-logo {
    font-size: 36px;
    font-weight: 700;
    color: var(--primary-color);
    margin-bottom: 8px;
}

.find-title {
    font-size: 24px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.find-subtitle {
    font-size: 14px;
    color: var(--text-secondary);
    line-height: 1.6;
}

/* 스텝 인디케이터 */
.step-indicator {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 32px;
}

.step {
    display: flex;
    align-items: center;
    gap: 8px;
}

.step-number {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background-color: var(--bg-color);
    border: 2px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-secondary);
    transition: all 0.3s;
}

.step.active .step-number {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
    color: white;
}

.step.completed .step-number {
    background-color: var(--success-color);
    border-color: var(--success-color);
    color: white;
}

.step-label {
    font-size: 12px;
    color: var(--text-secondary);
    display: none;
}

.step-line {
    width: 40px;
    height: 2px;
    background-color: var(--border-color);
}

.step-line.active {
    background-color: var(--primary-color);
}

/* 탭 스타일 */
.tab-container {
    display: flex;
    border-bottom: 1px solid var(--border-color);
    margin-bottom: 24px;
}

.tab-btn {
    flex: 1;
    padding: 14px 16px;
    background: none;
    border: none;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-secondary);
    cursor: pointer;
    position: relative;
    transition: all 0.2s;
}

.tab-btn:hover {
    color: var(--primary-color);
}

.tab-btn.active {
    color: var(--primary-color);
    font-weight: 600;
}

.tab-btn.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 2px;
    background-color: var(--primary-color);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

.form-group {
    margin-bottom: 20px;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--text-primary);
    font-size: 14px;
}

.form-label .required {
    color: var(--danger-color);
    margin-left: 2px;
}

.form-input {
    width: 100%;
    padding: 12px 16px;
    font-size: 14px;
    border: 1px solid var(--border-color);
    border-radius: var(--radius-md);
    background-color: var(--surface-color);
    color: var(--text-primary);
    transition: all 0.2s;
}

.form-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
}

.form-input::placeholder {
    color: var(--text-muted);
}

.input-with-btn {
    display: flex;
    gap: 8px;
}

.input-with-btn .form-input {
    flex: 1;
}

.input-with-btn .btn {
    white-space: nowrap;
    flex-shrink: 0;
}

.form-error {
    margin-top: 8px;
    font-size: 12px;
    color: var(--danger-color);
    display: none;
}

.form-error.show {
    display: block;
}

.form-hint {
    margin-top: 8px;
    font-size: 12px;
    color: var(--text-secondary);
}

.submit-button {
    margin-top: 24px;
    width: 100%;
}

.find-footer {
    margin-top: 32px;
    text-align: center;
    font-size: 13px;
    color: var(--text-secondary);
}

.find-footer a {
    color: var(--primary-color);
    text-decoration: none;
    margin: 0 8px;
}

.find-footer a:hover {
    text-decoration: underline;
}

/* 결과 화면 */
.result-container {
    display: none;
    text-align: center;
    padding: 20px 0;
}

.result-container.show {
    display: block;
}

.result-icon {
    width: 80px;
    height: 80px;
    background-color: rgba(16, 185, 129, 0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 24px;
}

.result-icon svg {
    width: 40px;
    height: 40px;
    color: var(--success-color);
}

.result-title {
    font-size: 20px;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 12px;
}

.result-message {
    font-size: 14px;
    color: var(--text-secondary);
    margin-bottom: 8px;
    line-height: 1.6;
}

.result-actions {
    display: flex;
    gap: 12px;
    margin-top: 24px;
}

.result-actions .btn {
    flex: 1;
}

/* 타이머 */
.timer {
    font-size: 12px;
    color: var(--danger-color);
    margin-top: 8px;
}

/* 비밀번호 강도 표시 */
.password-strength {
    margin-top: 8px;
}

.strength-bar {
    height: 4px;
    background-color: var(--border-color);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 4px;
}

.strength-fill {
    height: 100%;
    width: 0;
    transition: all 0.3s;
    border-radius: 2px;
}

.strength-fill.weak {
    width: 33%;
    background-color: var(--danger-color);
}

.strength-fill.medium {
    width: 66%;
    background-color: var(--warning-color);
}

.strength-fill.strong {
    width: 100%;
    background-color: var(--success-color);
}

.strength-text {
    font-size: 11px;
    color: var(--text-muted);
}

/* 스텝별 폼 영역 */
.step-form {
    display: none;
}

.step-form.active {
    display: block;
}

/* 비밀번호 요구사항 */
.password-requirements {
    margin-top: 12px;
    padding: 12px;
    background-color: var(--bg-color);
    border-radius: var(--radius-md);
}

.requirement {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-secondary);
    margin-bottom: 4px;
}

.requirement:last-child {
    margin-bottom: 0;
}

.requirement-icon {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background-color: var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.requirement-icon svg {
    width: 10px;
    height: 10px;
    color: white;
    display: none;
}

.requirement.valid .requirement-icon {
    background-color: var(--success-color);
}

.requirement.valid .requirement-icon svg {
    display: block;
}

.requirement.valid {
    color: var(--success-color);
}

@media (max-width: 768px) {
    .main-content {
        padding: 24px 16px;
    }

    .find-container {
        padding: 32px 24px;
    }
    
    .find-logo {
        font-size: 28px;
    }
    
    .find-title {
        font-size: 20px;
    }

    .input-with-btn {
        flex-direction: column;
    }

    .result-actions {
        flex-direction: column;
    }

    .step-label {
        display: none;
    }
}
    </style>
</head>
<body>
    <div class="app-container">
        <script>
            document.write(createHeader());
        </script>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <div class="find-container" id="findPwContainer">
                <div class="find-header" id="findPwHeader">
                    <div class="find-logo">Tokbell</div>
                    <h2 class="find-title">비밀번호 찾기</h2>
                    <p class="find-subtitle">본인 인증 후 새로운 비밀번호를 설정할 수 있습니다.</p>
                </div>

                <!-- 스텝 인디케이터 -->
                <div class="step-indicator" id="stepIndicator">
                    <div class="step active" id="step1">
                        <span class="step-number">1</span>
                        <span class="step-label">아이디 확인</span>
                    </div>
                    <div class="step-line" id="stepLine1"></div>
                    <div class="step" id="step2">
                        <span class="step-number">2</span>
                        <span class="step-label">본인 인증</span>
                    </div>
                    <div class="step-line" id="stepLine2"></div>
                    <div class="step" id="step3">
                        <span class="step-number">3</span>
                        <span class="step-label">비밀번호 재설정</span>
                    </div>
                </div>

                <!-- Step 1: 아이디 입력 -->
                <div class="step-form active" id="stepForm1">
                    <form id="idForm" onsubmit="handleIdSubmit(event)">
                        <div class="form-group" id="userIdGroup">
                            <label class="form-label" for="userId">아이디<span class="required">*</span></label>
                            <input 
                                type="text" 
                                id="userId" 
                                class="form-input" 
                                placeholder="가입한 아이디를 입력하세요"
                            >
                            <div class="form-error" id="userIdError">아이디를 입력해주세요.</div>
                            <div class="form-hint" id="userIdHint">가입 시 등록한 아이디를 입력해주세요.</div>
                        </div>

                        <button type="submit" class="btn btn-primary submit-button" id="step1NextBtn">다음</button>
                    </form>
                </div>

                <!-- Step 2: 본인 인증 -->
                <div class="step-form" id="stepForm2">
                    <!-- 인증 방법 탭 -->
                    <div class="tab-container" id="tabContainer">
                        <button class="tab-btn active" data-tab="phone" id="phoneTabBtn" onclick="switchTab('phone')">휴대폰 인증</button>
                        <button class="tab-btn" data-tab="email" id="emailTabBtn" onclick="switchTab('email')">이메일 인증</button>
                    </div>

                    <!-- 휴대폰 인증 -->
                    <div class="tab-content active" id="phoneTab">
                        <form id="phoneForm" onsubmit="handlePhoneVerify(event)">
                            <div class="form-group" id="phoneNumberGroup">
                                <label class="form-label" for="phoneNumber">휴대폰 번호<span class="required">*</span></label>
                                <div class="input-with-btn">
                                    <input 
                                        type="tel" 
                                        id="phoneNumber" 
                                        class="form-input" 
                                        placeholder="'-' 없이 숫자만 입력"
                                        maxlength="11"
                                    >
                                    <button type="button" class="btn btn-outline" id="sendPhoneCodeBtn" onclick="sendPhoneCode()">인증번호 발송</button>
                                </div>
                                <div class="form-error" id="phoneNumberError">휴대폰 번호를 입력해주세요.</div>
                            </div>

                            <div class="form-group" id="phoneVerifyGroup" style="display: none;">
                                <label class="form-label" for="phoneVerifyCode">인증번호<span class="required">*</span></label>
                                <div class="input-with-btn">
                                    <input 
                                        type="text" 
                                        id="phoneVerifyCode" 
                                        class="form-input" 
                                        placeholder="인증번호 6자리 입력"
                                        maxlength="6"
                                    >
                                    <button type="button" class="btn btn-outline" id="phoneResendBtn" onclick="sendPhoneCode()">재발송</button>
                                </div>
                                <div class="timer" id="phoneTimer">03:00</div>
                                <div class="form-error" id="phoneVerifyError">인증번호를 입력해주세요.</div>
                            </div>

                            <button type="submit" class="btn btn-primary submit-button" id="phoneVerifyBtn">인증 확인</button>
                        </form>
                    </div>

                    <!-- 이메일 인증 -->
                    <div class="tab-content" id="emailTab">
                        <form id="emailForm" onsubmit="handleEmailVerify(event)">
                            <div class="form-group" id="userEmailGroup">
                                <label class="form-label" for="userEmail">이메일<span class="required">*</span></label>
                                <div class="input-with-btn">
                                    <input 
                                        type="email" 
                                        id="userEmail" 
                                        class="form-input" 
                                        placeholder="가입 시 등록한 이메일"
                                    >
                                    <button type="button" class="btn btn-outline" id="sendEmailCodeBtn" onclick="sendEmailCode()">인증번호 발송</button>
                                </div>
                                <div class="form-error" id="userEmailError">이메일을 입력해주세요.</div>
                            </div>

                            <div class="form-group" id="emailVerifyGroup" style="display: none;">
                                <label class="form-label" for="emailVerifyCode">인증번호<span class="required">*</span></label>
                                <div class="input-with-btn">
                                    <input 
                                        type="text" 
                                        id="emailVerifyCode" 
                                        class="form-input" 
                                        placeholder="인증번호 6자리 입력"
                                        maxlength="6"
                                    >
                                    <button type="button" class="btn btn-outline" id="emailResendBtn" onclick="sendEmailCode()">재발송</button>
                                </div>
                                <div class="timer" id="emailTimer">03:00</div>
                                <div class="form-error" id="emailVerifyError">인증번호를 입력해주세요.</div>
                            </div>

                            <button type="submit" class="btn btn-primary submit-button" id="emailVerifyBtn">인증 확인</button>
                        </form>
                    </div>
                </div>

                <!-- Step 3: 비밀번호 재설정 -->
                <div class="step-form" id="stepForm3">
                    <form id="resetForm" onsubmit="handleResetSubmit(event)">
                        <div class="form-group" id="newPasswordGroup">
                            <label class="form-label" for="newPassword">새 비밀번호<span class="required">*</span></label>
                            <input 
                                type="password" 
                                id="newPassword" 
                                class="form-input" 
                                placeholder="새 비밀번호를 입력하세요"
                                oninput="checkPasswordStrength(this.value)"
                            >
                            <div class="password-strength" id="passwordStrength">
                                <div class="strength-bar">
                                    <div class="strength-fill" id="strengthFill"></div>
                                </div>
                                <span class="strength-text" id="strengthText"></span>
                            </div>
                            <div class="form-error" id="newPasswordError">비밀번호를 입력해주세요.</div>
                            
                            <div class="password-requirements" id="passwordRequirements">
                                <div class="requirement" id="reqLength">
                                    <span class="requirement-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </span>
                                    <span>8~20자 이내</span>
                                </div>
                                <div class="requirement" id="reqLetter">
                                    <span class="requirement-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </span>
                                    <span>영문 포함</span>
                                </div>
                                <div class="requirement" id="reqNumber">
                                    <span class="requirement-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </span>
                                    <span>숫자 포함</span>
                                </div>
                                <div class="requirement" id="reqSpecial">
                                    <span class="requirement-icon">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
                                        </svg>
                                    </span>
                                    <span>특수문자 포함 (!@#$%^&*)</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group" id="confirmPasswordGroup">
                            <label class="form-label" for="confirmPassword">비밀번호 확인<span class="required">*</span></label>
                            <input 
                                type="password" 
                                id="confirmPassword" 
                                class="form-input" 
                                placeholder="비밀번호를 다시 입력하세요"
                            >
                            <div class="form-error" id="confirmPasswordError">비밀번호가 일치하지 않습니다.</div>
                        </div>

                        <button type="submit" class="btn btn-primary submit-button" id="resetPwBtn">비밀번호 변경</button>
                    </form>
                </div>

                <!-- 결과 화면 -->
                <div class="result-container" id="resultArea">
                    <div class="result-icon" id="resultIcon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                        </svg>
                    </div>
                    <h3 class="result-title" id="resultTitle">비밀번호가 변경되었습니다</h3>
                    <p class="result-message" id="resultMessage">새로운 비밀번호로 로그인해주세요.</p>
                    <div class="result-actions" id="resultActions">
                        <a href="login.html" class="btn btn-primary" id="goLoginBtn" style="flex: 1;">로그인</a>
                    </div>
                </div>

                <div class="find-footer" id="findFooter">
                    <a href="login.html" id="footerLoginLink">로그인</a>
                    <span>|</span>
                    <a href="find-id.html" id="footerFindIdLink">아이디 찾기</a>
                    <span>|</span>
                    <a href="signup.html" id="footerSignupLink">회원가입</a>
                </div>
            </div>
        </main>
    </div>

    <script>
        let currentStep = 1;
        let phoneTimerInterval = null;
        let emailTimerInterval = null;

        // 스텝 이동
        function goToStep(step) {
            currentStep = step;
            
            // 스텝 폼 전환
            document.querySelectorAll('.step-form').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById('stepForm' + step).classList.add('active');
            
            // 스텝 인디케이터 업데이트
            for (let i = 1; i <= 3; i++) {
                const stepEl = document.getElementById('step' + i);
                const lineEl = document.getElementById('stepLine' + (i - 1));
                
                stepEl.classList.remove('active', 'completed');
                if (lineEl) lineEl.classList.remove('active');
                
                if (i < step) {
                    stepEl.classList.add('completed');
                    if (lineEl) lineEl.classList.add('active');
                } else if (i === step) {
                    stepEl.classList.add('active');
                }
            }
        }

        // Step 1: 아이디 확인
        function handleIdSubmit(event) {
            event.preventDefault();
            
            const userId = document.getElementById('userId').value.trim();
            
            if (!userId) {
                document.getElementById('userIdError').classList.add('show');
                return;
            }
            
            document.getElementById('userIdError').classList.remove('show');
            goToStep(2);
        }

        // 탭 전환
        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.tab === tabName) {
                    btn.classList.add('active');
                }
            });

            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(tabName + 'Tab').classList.add('active');
        }

        // 휴대폰 인증번호 발송
        function sendPhoneCode() {
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            
            if (!phoneNumber) {
                document.getElementById('phoneNumberError').classList.add('show');
                return;
            }
            
            document.getElementById('phoneNumberError').classList.remove('show');
            document.getElementById('phoneVerifyGroup').style.display = 'block';
            
            startTimer('phoneTimer', 'phone');
            alert('인증번호가 발송되었습니다.');
        }

        // 이메일 인증번호 발송
        function sendEmailCode() {
            const email = document.getElementById('userEmail').value.trim();
            
            if (!email) {
                document.getElementById('userEmailError').classList.add('show');
                return;
            }
            
            document.getElementById('userEmailError').classList.remove('show');
            document.getElementById('emailVerifyGroup').style.display = 'block';
            
            startTimer('emailTimer', 'email');
            alert('인증번호가 발송되었습니다.');
        }

        // 타이머 시작
        function startTimer(timerId, type) {
            const timerEl = document.getElementById(timerId);
            let timeLeft = 180;
            
            if (type === 'phone' && phoneTimerInterval) clearInterval(phoneTimerInterval);
            if (type === 'email' && emailTimerInterval) clearInterval(emailTimerInterval);
            
            const interval = setInterval(() => {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                timerEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(interval);
                    timerEl.textContent = '시간 만료';
                }
                timeLeft--;
            }, 1000);
            
            if (type === 'phone') {
                phoneTimerInterval = interval;
            } else {
                emailTimerInterval = interval;
            }
        }

        // Step 2: 휴대폰 인증 확인
        function handlePhoneVerify(event) {
            event.preventDefault();
            
            const phoneNumber = document.getElementById('phoneNumber').value.trim();
            const verifyCode = document.getElementById('phoneVerifyCode').value.trim();
            
            let isValid = true;
            
            if (!phoneNumber) {
                document.getElementById('phoneNumberError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('phoneNumberError').classList.remove('show');
            }
            
            if (!verifyCode) {
                document.getElementById('phoneVerifyError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('phoneVerifyError').classList.remove('show');
            }
            
            if (isValid) {
                if (phoneTimerInterval) clearInterval(phoneTimerInterval);
                goToStep(3);
            }
        }

        // Step 2: 이메일 인증 확인
        function handleEmailVerify(event) {
            event.preventDefault();
            
            const email = document.getElementById('userEmail').value.trim();
            const verifyCode = document.getElementById('emailVerifyCode').value.trim();
            
            let isValid = true;
            
            if (!email) {
                document.getElementById('userEmailError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('userEmailError').classList.remove('show');
            }
            
            if (!verifyCode) {
                document.getElementById('emailVerifyError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('emailVerifyError').classList.remove('show');
            }
            
            if (isValid) {
                if (emailTimerInterval) clearInterval(emailTimerInterval);
                goToStep(3);
            }
        }

        // 비밀번호 강도 체크
        function checkPasswordStrength(password) {
            const strengthFill = document.getElementById('strengthFill');
            const strengthText = document.getElementById('strengthText');
            
            // 요구사항 체크
            const hasLength = password.length >= 8 && password.length <= 20;
            const hasLetter = /[a-zA-Z]/.test(password);
            const hasNumber = /[0-9]/.test(password);
            const hasSpecial = /[!@#$%^&*]/.test(password);
            
            // 요구사항 UI 업데이트
            document.getElementById('reqLength').classList.toggle('valid', hasLength);
            document.getElementById('reqLetter').classList.toggle('valid', hasLetter);
            document.getElementById('reqNumber').classList.toggle('valid', hasNumber);
            document.getElementById('reqSpecial').classList.toggle('valid', hasSpecial);
            
            // 강도 계산
            let strength = 0;
            if (hasLength) strength++;
            if (hasLetter) strength++;
            if (hasNumber) strength++;
            if (hasSpecial) strength++;
            
            // 강도 표시
            strengthFill.className = 'strength-fill';
            if (password.length === 0) {
                strengthText.textContent = '';
            } else if (strength <= 2) {
                strengthFill.classList.add('weak');
                strengthText.textContent = '약함';
            } else if (strength === 3) {
                strengthFill.classList.add('medium');
                strengthText.textContent = '보통';
            } else {
                strengthFill.classList.add('strong');
                strengthText.textContent = '강함';
            }
        }

        // Step 3: 비밀번호 재설정
        function handleResetSubmit(event) {
            event.preventDefault();
            
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            let isValid = true;
            
            // 비밀번호 유효성 검사
            const hasLength = newPassword.length >= 8 && newPassword.length <= 20;
            const hasLetter = /[a-zA-Z]/.test(newPassword);
            const hasNumber = /[0-9]/.test(newPassword);
            const hasSpecial = /[!@#$%^&*]/.test(newPassword);
            
            if (!newPassword || !hasLength || !hasLetter || !hasNumber || !hasSpecial) {
                document.getElementById('newPasswordError').textContent = '비밀번호 조건을 충족해주세요.';
                document.getElementById('newPasswordError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('newPasswordError').classList.remove('show');
            }
            
            if (newPassword !== confirmPassword) {
                document.getElementById('confirmPasswordError').classList.add('show');
                isValid = false;
            } else {
                document.getElementById('confirmPasswordError').classList.remove('show');
            }
            
            if (isValid) {
                showResult();
            }
        }

        // 결과 화면 표시
        function showResult() {
            document.getElementById('stepIndicator').style.display = 'none';
            document.querySelectorAll('.step-form').forEach(form => {
                form.classList.remove('active');
            });
            document.getElementById('resultArea').classList.add('show');
            document.getElementById('findFooter').style.display = 'none';
        }

        // 드롭다운 메뉴 초기화
        document.addEventListener('DOMContentLoaded', function() {
            initDropdownMenus();
        });
    </script>
    <!-- 화면설계 오버레이 -->
    <script src="js/spec-overlay.js"></script>
    <script>
        const specData = [
            // ===== 비밀번호 찾기 영역 =====
            // 1. 비밀번호 찾기 컨테이너
            {
                selector: '#findPwContainer',
                title: '비밀번호 찾기 컨테이너',
                position: { top: '10px', left: '10px' },
                function: '비밀번호 찾기 폼 전체 영역 (중앙 정렬 카드 형태)',
                behavior: [
                    '화면 중앙 배치',
                    '반응형: 모바일에서 너비 100%',
                    '3단계 프로세스 포함'
                ]
            },
            // 2. 헤더 영역
            {
                selector: '#findPwHeader',
                title: '헤더 영역',
                position: { top: '10px', right: '10px' },
                function: '페이지 타이틀 및 설명 영역',
                behavior: [
                    '로고, 제목, 부제목 표시',
                    '페이지 목적 안내'
                ]
            },
            // 3. 스텝 인디케이터
            {
                selector: '#stepIndicator',
                title: '스텝 인디케이터',
                position: { top: '-5px', left: '-10px' },
                function: '3단계 진행 상태 표시',
                behavior: [
                    'Step 1: 아이디 확인',
                    'Step 2: 본인 인증',
                    'Step 3: 비밀번호 재설정',
                    '완료된 단계는 체크 아이콘 표시',
                    '현재 단계는 파란색 강조'
                ]
            },
            // 4. Step 1 스텝 표시
            {
                selector: '#step1',
                title: 'Step 1 표시',
                position: { top: '-5px', left: '-10px' },
                function: '아이디 확인 단계 표시',
                behavior: [
                    '현재 단계: 파란색 원',
                    '완료 시: 녹색 체크 표시'
                ]
            },
            // 5. Step 1 폼 영역
            {
                selector: '#stepForm1',
                title: 'Step 1 폼 영역',
                position: { top: '10px', left: '10px' },
                function: '아이디 입력 단계 폼',
                behavior: [
                    '아이디 입력 후 다음 버튼 클릭',
                    '아이디 존재 여부 확인',
                    '존재하지 않는 아이디 시 에러 메시지'
                ]
            },
            // 6. 아이디 입력 그룹
            {
                selector: '#userIdGroup',
                title: '아이디 입력 그룹',
                position: { top: '-5px', left: '-10px' },
                function: '가입한 아이디 입력 필드',
                behavior: [
                    '빈 값 시 "아이디를 입력해주세요" 에러',
                    '존재하지 않는 아이디 시 에러 메시지'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 7. 다음 버튼 (Step 1)
            {
                selector: '#step1NextBtn',
                title: '다음 버튼',
                position: { top: '-5px', left: '-10px' },
                function: 'Step 2로 이동',
                behavior: [
                    '아이디 유효성 검증',
                    '아이디 존재 여부 API 확인',
                    '성공 시 Step 2로 이동'
                ],
                api: 'POST /api/auth/check-id',
                tags: [{ text: 'API', type: 'api' }]
            },
            // 8. Step 2 폼 영역
            {
                selector: '#stepForm2',
                title: 'Step 2 폼 영역',
                position: { top: '10px', left: '10px' },
                function: '본인 인증 단계 폼',
                behavior: [
                    '휴대폰 또는 이메일 인증 선택',
                    '인증번호 발송 및 확인',
                    '인증 성공 시 Step 3로 이동'
                ]
            },
            // 9. 인증 방법 탭
            {
                selector: '#tabContainer',
                title: '인증 방법 탭',
                position: { top: '-5px', left: '-10px' },
                function: '휴대폰/이메일 인증 방법 선택',
                behavior: [
                    '탭 클릭 시 해당 인증 폼 표시',
                    '기본값: 휴대폰 인증'
                ]
            },
            // 10. 휴대폰 인증 탭
            {
                selector: '#phoneTabBtn',
                title: '휴대폰 인증 탭',
                position: { top: '-5px', left: '-10px' },
                function: '휴대폰 인증 폼으로 전환',
                behavior: [
                    '클릭 시 휴대폰 인증 폼 표시'
                ]
            },
            // 11. 이메일 인증 탭
            {
                selector: '#emailTabBtn',
                title: '이메일 인증 탭',
                position: { top: '-5px', right: '-10px' },
                function: '이메일 인증 폼으로 전환',
                behavior: [
                    '클릭 시 이메일 인증 폼 표시'
                ]
            },
            // 12. 휴대폰 번호 입력 그룹
            {
                selector: '#phoneNumberGroup',
                title: '휴대폰 번호 입력',
                position: { top: '-5px', left: '-10px' },
                function: '휴대폰 번호 입력 및 인증번호 발송',
                behavior: [
                    '숫자만 입력 (최대 11자리)',
                    '인증번호 발송 버튼 클릭 시 SMS 발송'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 13. 인증번호 발송 버튼 (휴대폰)
            {
                selector: '#sendPhoneCodeBtn',
                title: '인증번호 발송',
                position: { top: '-5px', right: '-10px' },
                function: 'SMS로 인증번호 발송',
                behavior: [
                    '6자리 인증번호 SMS 발송',
                    '발송 성공 시 인증번호 입력 필드 표시',
                    '3분 타이머 시작'
                ],
                api: 'POST /api/auth/send-sms-code',
                tags: [{ text: 'API', type: 'api' }]
            },
            // 14. 인증번호 입력 그룹 (휴대폰)
            {
                selector: '#phoneVerifyGroup',
                title: '인증번호 입력',
                position: { top: '-5px', left: '-10px' },
                function: 'SMS 인증번호 입력',
                behavior: [
                    '인증번호 발송 후 표시',
                    '6자리 숫자 입력',
                    '3분 타이머 표시'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 15. 인증 확인 버튼 (휴대폰)
            {
                selector: '#phoneVerifyBtn',
                title: '인증 확인 버튼',
                position: { top: '-5px', left: '-10px' },
                function: '휴대폰 인증 확인',
                behavior: [
                    '인증번호 일치 여부 확인',
                    '성공 시 Step 3로 이동',
                    '실패 시 에러 메시지'
                ],
                api: 'POST /api/auth/verify-sms-code',
                tags: [{ text: 'API', type: 'api' }]
            },
            // 16. 이메일 입력 그룹
            {
                selector: '#userEmailGroup',
                title: '이메일 입력',
                position: { top: '-5px', left: '-10px' },
                function: '이메일 입력 및 인증번호 발송',
                behavior: [
                    '가입 시 등록한 이메일 입력',
                    '이메일 형식 검증'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 17. 인증번호 발송 버튼 (이메일)
            {
                selector: '#sendEmailCodeBtn',
                title: '인증번호 발송',
                position: { top: '-5px', right: '-10px' },
                function: '이메일로 인증번호 발송',
                behavior: [
                    '6자리 인증번호 이메일 발송',
                    '발송 성공 시 인증번호 입력 필드 표시'
                ],
                api: 'POST /api/auth/send-email-code',
                tags: [{ text: 'API', type: 'api' }]
            },
            // 18. 인증번호 입력 그룹 (이메일)
            {
                selector: '#emailVerifyGroup',
                title: '인증번호 입력',
                position: { top: '-5px', left: '-10px' },
                function: '이메일 인증번호 입력',
                behavior: [
                    '인증번호 발송 후 표시',
                    '6자리 숫자 입력'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 19. 인증 확인 버튼 (이메일)
            {
                selector: '#emailVerifyBtn',
                title: '인증 확인 버튼',
                position: { top: '-5px', left: '-10px' },
                function: '이메일 인증 확인',
                behavior: [
                    '인증번호 일치 여부 확인',
                    '성공 시 Step 3로 이동'
                ],
                api: 'POST /api/auth/verify-email-code',
                tags: [{ text: 'API', type: 'api' }]
            },
            // 20. Step 3 폼 영역
            {
                selector: '#stepForm3',
                title: 'Step 3 폼 영역',
                position: { top: '10px', left: '10px' },
                function: '비밀번호 재설정 단계 폼',
                behavior: [
                    '새 비밀번호 입력',
                    '비밀번호 확인 입력',
                    '비밀번호 강도 체크'
                ]
            },
            // 21. 새 비밀번호 입력 그룹
            {
                selector: '#newPasswordGroup',
                title: '새 비밀번호 입력',
                position: { top: '-5px', left: '-10px' },
                function: '새 비밀번호 입력 필드',
                behavior: [
                    '입력값 마스킹 처리',
                    '실시간 강도 체크',
                    '요구사항 충족 여부 표시'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 22. 비밀번호 강도 표시
            {
                selector: '#passwordStrength',
                title: '비밀번호 강도',
                position: { top: '-5px', right: '-10px' },
                function: '비밀번호 강도 시각적 표시',
                behavior: [
                    '약함: 빨간색 1/3',
                    '보통: 노란색 2/3',
                    '강함: 녹색 100%'
                ]
            },
            // 23. 비밀번호 요구사항
            {
                selector: '#passwordRequirements',
                title: '비밀번호 요구사항',
                position: { top: '-5px', left: '-10px' },
                function: '비밀번호 조건 체크리스트',
                behavior: [
                    '8~20자 이내',
                    '영문 포함',
                    '숫자 포함',
                    '특수문자 포함 (!@#$%^&*)',
                    '충족 시 녹색 체크 표시'
                ]
            },
            // 24. 비밀번호 확인 그룹
            {
                selector: '#confirmPasswordGroup',
                title: '비밀번호 확인',
                position: { top: '-5px', left: '-10px' },
                function: '비밀번호 재입력 확인',
                behavior: [
                    '새 비밀번호와 일치 여부 확인',
                    '불일치 시 에러 메시지'
                ],
                tags: [{ text: '필수', type: 'required' }]
            },
            // 25. 비밀번호 변경 버튼
            {
                selector: '#resetPwBtn',
                title: '비밀번호 변경 버튼',
                position: { top: '-5px', left: '-10px' },
                function: '비밀번호 변경 실행',
                behavior: [
                    '모든 요구사항 충족 확인',
                    '비밀번호 일치 확인',
                    '성공 시 결과 화면 표시'
                ],
                api: 'POST /api/auth/reset-password',
                tags: [{ text: '필수', type: 'required' }, { text: 'API', type: 'api' }]
            },
            // 26. 결과 화면
            {
                selector: '#resultArea',
                title: '결과 화면',
                position: { top: '10px', left: '10px' },
                function: '비밀번호 변경 완료 화면',
                behavior: [
                    '비밀번호 변경 성공 후 표시',
                    '스텝 인디케이터 숨김',
                    '로그인 페이지 이동 버튼 제공'
                ]
            },
            // 27. 로그인 버튼 (결과)
            {
                selector: '#goLoginBtn',
                title: '로그인 버튼',
                position: { top: '-5px', left: '-10px' },
                function: '로그인 페이지로 이동',
                behavior: [
                    '클릭 시 login.html 이동',
                    '변경된 비밀번호로 로그인 안내'
                ]
            },
            // 28. 푸터 링크 영역
            {
                selector: '#findFooter',
                title: '푸터 링크 영역',
                position: { top: '-5px', left: '-10px' },
                function: '관련 페이지 이동 링크',
                behavior: [
                    '로그인 / 아이디 찾기 / 회원가입 링크',
                    '구분자(|)로 링크 구분'
                ]
            }
        ];
        initSpecOverlay(specData);
    </script>
</body>
</html>
